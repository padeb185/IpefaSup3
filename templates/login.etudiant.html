{% extends "base.html" %}
{% load static %}

{% block title %}Connexion{% endblock %}

{% block bodyId %}loginPage{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

<form action="{% url 'login.etudiant' %}" method="post">
  {% csrf_token %}
  {% if error %}
  <p class="error">{{ error }}</p>
  {% endif %}
  
  <p>
    <label for="email">E-mail :</label>
    <input name="email" id="email" size="30" type="email" required>
    <span id="emailError" style="color: red;"></span>  <!-- ← ici -->
  </p>

  <p>
    <label for="password">Mot de passe :</label>
    <input name="password" id="password" size="30" type="password" required>
  </p>

  <p>
    <input type="submit" value="Se connecter" />
  </p>
</form>

<script>
    document.getElementById("email").addEventListener("input", function () {
        const email = this.value;
        const errorSpan = document.getElementById("emailError");  // Corrected ID

        // Vérifie le format prénom.nom@student.efpl.be
        const regex = /^[a-zA-Z]+\.[a-zA-Z]+@student\.efpl\.be$/;

        if (email === "") {
            errorSpan.textContent = "";
        } else if (!regex.test(email)) {
            errorSpan.textContent = "L'adresse email doit être au format prénom.nom@student.efpl.be";
        } else {
            errorSpan.textContent = "";
        }
    });
</script>
{% endblock %}
